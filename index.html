<!DOCTYPE html>
<html lang="he">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>🎲 Game and Beyond</title>
    <link rel="stylesheet" href="style.css">
    <link rel="manifest" href="manifest.json">
    <link rel="icon" type="image/png" href="icon-192.png">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    </head>
<body>

<main id="landingScreen" role="main">
    <h1>דייט לא שגרתי 🎉</h1>
    <p>ערב של קלפים, שיחה, גירוי וצחוק שלא יישאר אתכם אדישים.<br>בחרו את מצב הרוח שלכם – והמשחק מתחיל! 🔥</p>
    <button class="menu-btn" onclick="enterGame()">🎙 נכנסים להריון – משחק פתוח</button>
    <button class="menu-btn" onclick="launchWhoKnows()">🧠 מי מכיר את מי</button>
    <button class="menu-btn locked">🔒 קלפי שתייה לוהטים – בקרוב 🍸</button>
    <button class="menu-btn locked">🔒 אמת, חובה ותשוקה – בקרוב 🍪</button>
</main>

<button id="showIndexBtn" onclick="toggleCardIndexA()">📚 הצג את כל הקלפים</button>

<div id="cardIndexPanel" style="display: none;">
    <h3>📋 אינדקס קלפים</h3>
    <div id="cardIndexList"></div>
</div>

<main id="startScreen" role="main" style="display:none;">
    <h1>🎲 דייט לא שגרתי</h1>
    <label for="player1Name">שם שחקן 1:</label><input id="player1Name" type="text" placeholder="מתן"><br>
    <label for="player2Name">שם שחקן 2:</label><input id="player2Name" type="text" placeholder="אור"><br>
    <label>מצב רוח:</label>
    <div id="moodButtons">
        <button class="mood-btn selected" data-mood="mixed" onclick="setMood('mixed',this)">🎭 משולב</button>
        <button class="mood-btn" data-mood="fun" onclick="setMood('fun',this)">💛 מצחיק</button>
        <button class="mood-btn" data-mood="romantic" onclick="setMood('romantic',this)">💗 זוגי</button>
        <button class="mood-btn" data-mood="sexual" onclick="setMood('sexual',this)">🔥 מיני</button>
    </div><br>
    <label>כמות קלפים:
        <input id="numCards" type="number" value="10" min="1" max="160">
    </label><br><br>
    <button id="startGameBtn" onclick="startGame()">🎮 התחל משחק</button>
</main>

<main id="gameScreen" role="main" style="display:none;">
    <div id="turnDisplay"></div>
    <div id="scoreBoard"></div>
    <div id="cardArea"></div>
    <div id="timer" style="display:none;"></div>
    <div id="actions">
        <button id="drawBtn" onclick="drawCard()">🎴 שלוף קלף</button>
        <div id="cardsRemaining"></div>
        <button id="skipBtn" onclick="skipCard()">⏭ דלג</button>
        <button id="completeBtn" onclick="completeTask()" style="display:none;">✔️ השלמתי</button>
    </div>
</main>

<div id="summaryScreen" style="display:none;">
    <h2>🏁 המשחק הסתיים!</h2>
    <pre id="finalResults"></pre>
    <button onclick="exportToPDF()">📄 יצא PDF</button>
    <button onclick="location.reload()">🔁 משחק חדש</button>
</div>

<main id="whoKnowsStart" role="main" style="display:none;">
    <h2>🧠 מי מכיר את מי</h2>
    <label for="whoKnowsPlayer1">שם שחקן 1:</label><input id="whoKnowsPlayer1" type="text" placeholder="שחקן 1"><br>
    <label for="whoKnowsPlayer2">שם שחקן 2:</label><input id="whoKnowsPlayer2" type="text" placeholder="שחקן 2"><br>
    <label>כמות שאלות:
        <input id="whoKnowsNumQuestions" type="number" min="1" max="150" value="10">
    </label><br><br>
    <button onclick="startWhoKnowsGame()">🎮 התחל משחק</button>
</main>

<section id="whoKnowsScreen" role="application" style="display:none;">
    <h2 id="whoKnowsTurn">תור של ...</h2>
    <div id="whoKnowsScores">
        <span id="scorePlayer1">0</span> - <span id="scorePlayer2">0</span>
    </div>
    <div id="whoKnowsQuestion"></div>
    <div id="whoKnowsActions">
        <button onclick="addPointAndNext()">✅ עניתי נכון</button>
        <button onclick="skipWhoKnows()">⏭ דלג</button>
    </div>
</section>

<script src="cards.js" defer></script>
<script src="script.js" defer></script>
<script src="cardsWhoKnows.js"></script>
<script src="script-who-knows-turns.js"></script>

<script>
    // if ('serviceWorker' in navigator) {
    //    navigator.serviceWorker.register('service-worker.js');
    // }

    function enterGame() {
        document.getElementById('landingScreen').style.display = 'none';
        document.getElementById('startScreen').style.display = 'flex';
    }

    function launchWhoKnows() {
        document.getElementById('landingScreen').style.display = 'none';
        document.getElementById('whoKnowsStart').style.display = 'flex';
    }

    function toggleCardIndexA() {
        const panel = document.getElementById('cardIndexPanel');
        if (panel.style.display !== 'block') {
            fillCardsIndexA();
        }
        panel.style.display = panel.style.display === 'block' ? 'none' : 'block';
    }

    function updateCardIndex() {
        const container = document.getElementById('cardIndexList');
        container.innerHTML = '';
        const all = [...played, ...cardsToPlay];
        all.forEach(card => {
            const div = document.createElement('div');
            div.className = 'card-index-item' + (played.includes(card) ? ' card-played' : '');
            div.textContent = card.text;
            container.appendChild(div);
        });
    }
</script>

</body>
</html>
